# Docker-compose

Compose is a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your application's services. Then, with a single command, you create and start all the services from your configuration.

Create a working directory i.e. **/home/inewham/docker-compose/transmission**, and cd into the new working directory e.g., cd **/home/inewham/docker-compose/transmission**

Create a **docker-compose.ym**l file

```bash
touch docker-compose.yml
```

Edit **docker-compose.yml**

```bash
nano docker-compose.yml
```

Below is the contents to deploy a docker container of Transmission, which is a torrent server.

```yaml
transmission:
    image: lscr.io/linuxserver/transmission:latest
    container_name: transmission
    labels:
      # The Below labels are used in conjunction with Traefik proxy and can be ommited
      # if Traefik is not being deployed with Transmission.
      - "traefik.enable=true"
      - "traefik.frontend.rule=Host:transmission.saiyansolutions.com"
      - "traefik.http.routers.transmission.rule=Host(`transmission.saiyansolutions.com`)"
      - "traefik.http.routers.transmission.entrypoints=websecure"
      - "traefik.http.routers.transmission.tls.certresolver=myresolver"
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/London
      - TRANSMISSION_WEB_HOME= #optional
      - USER=<USERNAME>
      - PASS=<PASWORD>
      - WHITELIST= #optional
      - PEERPORT= #optional
      - HOST_WHITELIST= #optional
    volumes:
      # Mapping physical storage to the docker container for persistant storage.
      - /<path>/transmission:/config
      - /<path>/transmission:/downloads
      - /<path>/transmission:/watch
     # The below ports have been ommitted because Traefik will handle the port forwarding.
#    ports:
#      - 9091:9091
#      - 51413:51413
#      - 51413:51413/udp
    restart: unless-stopped
```

To deploy this template run the below command from the working directory.

```bash
sudo docker-compose up -d
```

To stop the containers run the following command.

```bash
sudo docker-compose stop
```

To delete the containers run the following command.

```bash
sudo docker-compose rm -f
```

Commands can be chained, the below code stops the transmission container, deletes it, recreates it, and outputs the log files generated by the container.

```bash
sudo docker-compose stop transmission && \
sudo docker-compose rm transmission && \
sudo docker-compose up -d transmission && \
sudo docker logs transmission -f
```